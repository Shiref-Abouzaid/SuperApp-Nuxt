(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{507:function(t,e,r){},513:function(t,e,r){"use strict";r(507)},588:function(t,e,r){"use strict";r.r(e);r(6),r(59),r(64),r(15),r(3),r(94),r(61),r(33),r(18),r(77),r(24),r(22),r(14),r(25),r(54),r(154),r(60),r(40),r(494);var n,o=r(0),c=r(34),l=(r(58),r(21)),d=r(16),m=r.n(d),h=r(95),v=r.n(h),f=r(11);function _(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var C=(n={name:"chat",layout:"withoutNavbar",data:function(){return{pusher:null,auctionChannel:null,channelName:"",allowToGetMore:!0,noMore:!1,noMoreRecentChats:!1,groupName:"",chatName:"",chatImage:"",chatWith:null,groupImages:[],recentChats:[],message:"",messages:[],members:{},informationIsOpen:!1,loading:{moremessages:!1,changeGroupName:"",moreChats:!1,addMemberToGroup:!1,removeMemberFromGroup:!1},subscriptions:[],friendSearchInput:"",selectedFriends:[],isOnline:!0,isFriend:!1,firendRequestSent:!1,showpopover:!1,mediaisOpen:!1,popupImageSrc:"",value:[],membersInArray:[],groupChatName:"",users:[],isAdmin:!1,filltredUsers:[],gallery:["https://pyxis.nymag.com/v1/imgs/897/4aa/e1547854e6a546b9c11a13317ca19bf6f4-08-bojack-409.rsquare.w700.jpg","https://images.squarespace-cdn.com/content/58cd7ccd46c3c40813a3412d/1505452320177-HK9EOKHE4DZXC7KKHXL1/Bojack+Horseman+Season+4+Courtney+Portnoy.png?content-type=image%2Fpng","https://pbs.twimg.com/profile_images/997077562533740544/feamgA9P_400x400.jpg","https://i.pinimg.com/originals/4e/17/af/4e17af7beb6cb1175407246980af8a6f.png","https://www.etonline.com/sites/default/files/styles/max_970x546/public/images/2016-07/1280_bojackhorseman_s1_netflix.jpg?itok=J3Uhe8n2","https://data.whicdn.com/images/327256690/original.jpg","https://pbs.twimg.com/profile_images/997077562533740544/feamgA9P_400x400.jpg","https://pyxis.nymag.com/v1/imgs/897/4aa/e1547854e6a546b9c11a13317ca19bf6f4-08-bojack-409.rsquare.w700.jpg"],attachType:"",attachUrl:"",attach:""}},mounted:function(){this.scrollToBottomOfChat()},watch:{$route:function(t,e){this.chatWith=null,this.$fetch()},friendSearchInput:function(){var t=this;this.filltredUsers=this.users.filter((function(e){return console.log(e.username.indexOf(t.friendSearchInput)),-1!==e.username.toLowerCase().indexOf(t.friendSearchInput.toLowerCase())}))}},fetch:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,d,sub,h,v,f,y,C,w,I,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("user id >> ",t.$store.getters["auth/userId"]),e.prev=1,e.next=4,m.a.get("/my/chatting/chats/skip/0/take/10",{headers:{Authorization:t.$store.getters["auth/token"]}});case 4:r=e.sent,t.recentChats=r.data.data,console.log("recent chats >> ",t.recentChats),r.data.data.length<10&&(t.noMoreRecentChats=!0),n=_(t.recentChats);try{for(n.s();!(o=n.n()).done;)if((c=o.value).id==t.$route.params.chatId)if(c.subscriptions.length>2){t.chatName=c.title,t.groupChatName=c.title,l=_(c.subscriptions);try{for(l.s();!(d=l.n()).done;)(sub=d.value).details&&t.groupImages.push({name:sub.first_name+sub.last_name,image:sub.details.image_url})}catch(t){l.e(t)}finally{l.f()}console.log("group members >> ",t.groupImages)}else{h=_(c.subscriptions);try{for(h.s();!(v=h.n()).done;)(f=v.value).id!=t.$store.getters["auth/userId"]&&(t.chatName=f.first_name+" "+f.last_name,console.log("sub member >> ",f),t.chatWith=f)}catch(t){h.e(t)}finally{h.f()}}}catch(t){n.e(t)}finally{n.f()}return e.next=12,m.a.get("/my/chatting/chat/"+t.$route.params.chatId+"/messages",{headers:{Authorization:t.$store.getters["auth/token"]}});case 12:y=e.sent,t.messages=y.data.data.messages.reverse(),C=y.data.data.members,console.log("members >> ",C),console.log("messages >> ",t.messages),console.log("messages data >> ",y),t.subscriptions=y.data.data.chat.subscriptions,t.membersInArray=y.data.data.members,1==t.subscriptions.find((function(e){return e.user_id==t.$store.getters["auth/userId"]})).is_admin?t.isAdmin=!0:t.isAdmin=!1,w=_(C);try{for(w.s();!(I=w.n()).done;)k=I.value,t.members[k.id]=k}catch(t){w.e(t)}finally{w.f()}console.log("members obj >> ",t.members),t.scrollToBottomOfChat(),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(1),console.log("error >> ",e.t0);case 31:case"end":return e.stop()}}),e,null,[[1,28]])})))()},computed:{locale:function(){return this.$store.getters["locale/locale"]},currentUser:function(){return{userId:this.$store.getters["auth/userId"],image:this.$store.getters["auth/image"]}},currentUserInfo:function(){var t=this;return this.membersInArray.filter((function(e){return e.id==t.$store.getters["auth/userId"]}))}}},Object(o.a)(n,"mounted",(function(){console.log("in create >>>>>>>>>",this.channelName),this.pusher=new v.a("dpctgdv35p33t63d3eva",{encrypted:!1,cluster:"eu",forceTLS:!1,httpHost:"synchronizer.tbdm.net",statsHost:"http://synchronizer.tbdm.net/stats",wsHost:"synchronizer.tbdm.net",wsPort:6001,authEndpoint:"https://developers.api.tbdm.net/v-1872020/"+this.locale+"/my/chat/"+this.$route.params.chatId+"/auth/presence",auth:{headers:{Authorization:this.$store.getters["auth/token"]}}}),console.log("auction route param id >> ",this.$route.params.chatId),this.channelName="presence-chat."+this.$route.params.chatId,this.auctionChannel=this.pusher.subscribe("presence-chat."+this.$route.params.chatId),console.log("auction channel",this.auctionChannel);var t=this,e=this.$store.getters["auth/userId"];this.auctionChannel.bind("App\\Events\\ChatNewMessage",(function(data){var r=data.message;console.log("data >> ",data),e!=r.user_id&&(t.messages.push({attachment:{id:r.attachment.id,content:r.attachment.content,type:r.attachment.type},chat_id:r.chat_id,content:r.content,created_at:r.created_at,user_id:r.user_id,id:r.id,updated_at:r.updated_at}),t.scrollToBottomOfChat())}))})),Object(o.a)(n,"methods",{addMemberToGroup:function(){var t,e=this,r=[],n=_(this.selectedFriends);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(i.id)}}catch(t){n.e(t)}finally{n.f()}var o={users_ids:r,chat_id:this.$route.params.chatId};this.loading.addMemberToGroup=!0,m.a.put("/my/chatting/chat/add/members",o).then((function(){e.$bvToast.toast("User has been add successfully to ".concat(e.chatName),{title:"user added Successfully",autoHideDelay:5e3,variant:"default"}),e.loading.addMemberToGroup=!1;var t,r=_(e.selectedFriends);try{for(r.s();!(t=r.n()).done;){var i=t.value,n=i;n.details=i.user_details,e.membersInArray.push(n)}}catch(t){r.e(t)}finally{r.f()}e.$bvModal.hide("addmemberpopup")})).catch((function(t){e.loading.addMemberToGroup=!1,e.$bvToast.toast(t.response.data.message,{title:"Error",autoHideDelay:5e3,variant:"danger"})}))},getMorChats:function(t,e){var r=this;this.loading.moreChats=!0,m.a.get("my/chatting/chats/skip/".concat(t,"/take/").concat(e)).then((function(t){r.recentChats=[].concat(Object(c.a)(r.recentChats),Object(c.a)(t.data.data)),r.loading.moreChats=!1,t.data.data.length<10&&(r.noMoreRecentChats=!0)})).catch((function(){r.loading.moreChats=!1}))},removeUserFromGroup:function(t){var e=this;this.loading.removeMemberFromGroup=!0;var r={chat_id:this.$route.params.chatId,users_ids:[t]};m.a.delete("/my/chatting/chat/remove/members",{headers:{Authorization:this.$store.getters["auth/token"]},data:r}).then((function(r){e.loading.removeMemberFromGroup=!1,e.getChatInfo(),e.$bvModal.hide("modal-".concat(t)),f.default.delete(e.members,t),e.membersInArray=e.membersInArray.filter((function(e){return e.id!=t})),e.$bvToast.toast("User has been removed successfully from ".concat(e.chatName),{title:"Removed Successfully",autoHideDelay:5e3,variant:"default"})})).catch((function(t){e.loading.removeMemberFromGroup=!1,e.$bvToast.toast(t.response.data.message,{title:"Error",autoHideDelay:5e3,variant:"danger"})}))},getChatInfo:function(){m.a.get("my/chatting/chat/".concat(this.$route.params.chatId,"/info"))},changeGroupTitle:function(){var t=this;this.loading.changeGroupName=!0;var e={title:this.groupChatName};m.a.put("my/chatting/chat/".concat(this.$route.params.chatId,"/info"),e).then((function(e){t.loading.changeGroupName=!1,t.$bvToast.toast("Group name has been updated successfuly",{title:"Video published",autoHideDelay:5e3,variant:"default"})})).catch((function(e){t.loading.changeGroupName=!1,console.log(e.response),t.$bvToast.toast(e.response.data.message,{title:"Error",autoHideDelay:5e3,variant:"danger"})}))},sendMessage:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("message >> ",t.message,new Date),r=(new Date).toISOString().substring(0,10),n=(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds(),console.log("date >. ",r+" "+n),e.prev=4,t.messages.push({attachment:{content:t.attachUrl,type:t.attachType},chat_id:t.$route.params.chatId,content:t.message,created_at:r+" "+n,user_id:t.$store.getters["auth/userId"]}),console.log("messages log >> ",t.messages),o=t.message,c=t.attach,t.message="",t.attach="",(l=new FormData).append("chat_id",t.$route.params.chatId),l.append("user_id",t.$store.getters["auth/userId"]),l.append("content",o),l.append("attachment",c),e.next=18,m.a.post("/my/chatting/chat/"+t.$route.params.chatId+"/messages",l,{headers:{Authorization:t.$store.getters["auth/token"]}});case 18:d=e.sent,console.log("message sending >> ",d),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),console.log("send error >> ",e.t0);case 25:t.message="",t.scrollToBottomOfChat();case 27:case"end":return e.stop()}}),e,null,[[4,22]])})))()},onFileSelected:function(t){var e=t.target.files[0],r=window.URL.createObjectURL(e);console.log("picked",r),this.attachUrl=r,this.attach=e,e.type.match("image.*")?this.attachType="image":e.type.match("video.*")&&(this.attachType="video"),console.log("file >> ",this.attach)},scrollToBottomOfChat:function(){var t=this;setTimeout((function(){var e=t.$el.querySelector(".scrollable-box-messages");e.scrollTop=e.scrollHeight}),10)},loadMoreMessages:function(){var t=this;this.$el.querySelector(".scrollable-box-messages").scrollTop<1?this.allowToGetMore&&!this.noMore&&(this.loading.moremessages=!0,this.allowToGetMore=!1,m.a.get("/my/chatting/chat/".concat(this.$route.params.chatId,"/messages/skip/").concat(this.messages.length,"/take/10")).then((function(e){t.loading.moremessages=!1,t.allowToGetMore=!0,t.messages=[].concat(Object(c.a)(e.data.data.messages.reverse()),Object(c.a)(t.messages)),e.data.data.messages.length<10&&(t.noMore=!0)})).catch((function(e){t.loading.moremessages=!1,t.allowToGetMore=!0}))):this.loading.moremessages=!1},pushToSelectedFriend:function(data){this.selectedFriends.push(data),this.$refs.friendSearchInput.focus()},onTagState:function(t){console.log(t)},hidePopOver:function(){this.showpopover=!1},removeFromSelected:function(t){this.selectedFriends.splice(t,1)},openAddMembers:function(){var t=this;this.$bvModal.show("addmemberpopup"),this.selectedFriends=[],this.users.length<1&&m.a.get("/my/social/friends/user/"+this.$store.getters["auth/userId"]+"/skip/0/take/100").then((function(e){t.users=e.data.data,t.filltredUsers=e.data.data}))},createGroup:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=[],n=_(t.selectedFriends);try{for(n.s();!(o=n.n()).done;)c=o.value,r.push(c.id)}catch(t){n.e(t)}finally{n.f()}return console.log("firends >> ",r),e.next=7,m.a.post("/my/chatting/initiate",{title:t.groupName,users:[].concat(r,[t.$store.getters["auth/userId"]]),created_by:t.$store.getters["auth/userId"]});case 7:l=e.sent,console.log("group >> ",l.data.data),t.$bvModal.hide("creatGroup"),t.$router.push("/"+t.locale+"/social/chat/"+l.data.data.id),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error >> ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},openGroup:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$bvModal.show("creatGroup"),e.next=3,m.a.get("/my/social/friends/user/"+t.$store.getters["auth/userId"]+"/skip/0/take/100");case 3:r=e.sent,t.users=r.data.data,t.filltredUsers=r.data.data;case 6:case"end":return e.stop()}}),e)})))()},isMember:function(t){return this.membersInArray.filter((function(e){return e.id==t})).length>0}}),Object(o.a)(n,"beforeDestroy",(function(){console.log("destroyed >> ",this.channelName)})),n),w=(r(513),r(39)),component=Object(w.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"social-chat"},[r("b-container",[r("b-row",{staticClass:"mt-3"},[r("b-col",{staticClass:"pr-sm-2 mb-sm-5",attrs:{sm:"3"}},[r("div",{staticClass:"chats-persons chat-box  h-100"},[r("div",{staticClass:"chat-header"},[r("b-row",[r("b-col",{attrs:{cols:"5"}},[r("div",{staticClass:"title"},[t._v("\n                                 "+t._s(t.$t("chat.chats"))+"\n                                ")])]),t._v(" "),r("b-col",{attrs:{cols:"7"}},[r("div",{staticClass:"create-group",on:{click:t.openGroup}},[r("img",{attrs:{src:"/images/icons/svg/social-creat-group.svg",alt:"icnon"}}),t._v(" "),r("span",{staticClass:"bold"},[t._v(t._s(t.$t("chat.create_group")))])])])],1)],1),t._v(" "),r("div",{staticClass:"users-select"},[t._l(t.recentChats,(function(e){return r("nuxt-link",{key:e.id,attrs:{to:"/"+t.locale+"/social/chat/"+e.id}},[2==e.subscriptions.length?r("div",{staticClass:"user",class:{active:e.id==t.$route.params.chatId}},t._l(e.subscriptions,(function(e){return r("div",{key:e.id},[e.id!=t.$store.getters["auth/userId"]?r("b-row",[r("b-col",{attrs:{cols:"2"}},[e.details&&e.details.image_url?r("img",{staticClass:"user-img",attrs:{src:e.details.image_url,alt:""}}):r("img",{staticClass:"user-img",attrs:{src:"/images/placeholder.jpg",alt:""}})]),t._v(" "),r("b-col",{attrs:{cols:"10"}},[r("div",{staticClass:"user-info"},[r("div",{staticClass:"name"},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])])])],1):t._e()],1)})),0):r("div",{staticClass:"user",class:{active:e.id==t.$route.params.chatId}},[r("b-row",[r("b-col",{attrs:{cols:"2"}},[r("img",{staticClass:"user-img",attrs:{src:"/images/group-img.png",alt:""}})]),t._v(" "),r("b-col",{attrs:{cols:"10"}},[r("div",{staticClass:"user-info"},[r("div",{staticClass:"name"},[t._v(t._s(e.title))])])])],1)],1)])})),t._v(" "),t.noMoreRecentChats?t._e():r("b-button",{staticClass:"no-shadow bg-primary-opacity-1  mt-1 color-primary text-center p-2 w-100",attrs:{variant:"default"},on:{click:function(e){return t.getMorChats(t.recentChats.length,10)}}},[t.loading.moreChats?t._e():r("span",[t._v("Show More")]),t._v(" "),t.loading.moreChats?r("b-spinner",{staticClass:"spinner-primary",attrs:{type:"grow",small:""}}):t._e()],1)],2)])]),t._v(" "),r("b-col",{staticClass:"pl-sm-2",attrs:{sm:"9"}},[r("div",{staticClass:"chat-box chat-messages-box mb-sm-5"},[r("div",{staticClass:"chat-header"},[r("b-row",[r("b-col",{attrs:{sm:"4",cols:"7"}},[r("b-row",{attrs:{"align-v":"center"}},[r("b-col",{attrs:{cols:"3"}},[r("div",{staticClass:"header-profile-picture"},[t.chatWith&&t.chatWith.details&&t.chatWith.details.image_url?r("b-img",{attrs:{src:t.chatWith.details.image_url,alt:"user-picture"}}):r("b-img",{attrs:{src:"/images/placeholder.jpg",alt:"user-picture"}})],1)]),t._v(" "),r("b-col",{staticClass:"name-status",attrs:{cols:"9"}},[r("div",[r("div",{staticClass:"user-name"},[t._v("\n                                                "+t._s(t.chatName)+"\n                                            ")])])])],1)],1),t._v(" "),r("b-col",{staticClass:"d-none d-sm-block",attrs:{sm:"4"}},[r("transition",{attrs:{name:"fade"}},[t.firendRequestSent?r("div",{staticClass:"friend-request-sent-successfully"},[t._v("\n                                      "+t._s(t.$t("chat.request_success"))+"\n                                    ")]):t._e()])],1),t._v(" "),r("b-col",{attrs:{sm:"4",cols:"5"}},[r("b-row",{staticClass:"h-100 tabs-container justify-content-end"},[t.chatWith?r("b-col",{attrs:{cols:"3"}},[r("nuxt-link",{attrs:{to:"/"+t.locale+"/user-profile/"+t.chatWith.id+"/"+t.chatWith.username}},[r("div",{staticClass:"icon-container"},[r("b-img",{attrs:{src:"/images/icons/svg/social-view-as.svg",alt:"icon"}})],1)])],1):t._e(),t._v(" "),!t.chatWith&&t.isAdmin?r("b-col",{attrs:{cols:"3"}},[r("div",{staticClass:"icon-container",on:{click:function(e){t.informationIsOpen=!t.informationIsOpen,t.mediaisOpen=!1}}},[r("b-img",{attrs:{src:"/images/icons/svg/social-information.svg",alt:"icon"}})],1)]):t._e()],1)],1)],1)],1),t._v(" "),r("b-row",{staticClass:"flex-nowrap overflow-hidden"},[r("b-col",{staticClass:"scroll-container",attrs:{sm:t.mediaisOpen||t.informationIsOpen?8:12,cols:t.mediaisOpen||t.informationIsOpen?7:12}},[r("div",{staticClass:"scrollable-box-messages",on:{scroll:function(e){return t.loadMoreMessages()}}},[t.loading.moremessages?r("div",{staticClass:"text-center",staticStyle:{position:"sticky",top:"3rem"}},[r("b-spinner",{staticClass:"spinner-primary",attrs:{small:"",type:"grow",label:"Spinning"}})],1):t._e(),t._v(" "),t._l(t.messages,(function(e,n){return r("div",{key:n,staticClass:"chat-content"},[e.user_id!=t.$store.getters["auth/userId"]?r("div",{staticClass:"recived-message message-container "},[r("img",{staticClass:"profile-image",attrs:{src:t.members[e.user_id]&&t.members[e.user_id].details&&t.members[e.user_id].details.image_url?t.members[e.user_id].details.image_url:"/images/placeholder.jpg",alt:""}}),t._v(" "),r("div",{staticClass:"message"},[e.attachment?[e.attachment.content&&"image"==e.attachment.type?r("img",{attrs:{src:e.attachment.content,alt:"sent photo."}}):e.attachment.content&&"video"==e.attachment.type?r("video",{attrs:{width:"320",height:"240",controls:""}},[r("source",{attrs:{src:e.attachment.content}})]):t._e()]:t._e(),t._v(" "),e.content?r("p",{staticClass:"m-0"},[t._v(t._s(e.content))]):t._e(),t._v(" "),r("div",{staticClass:"time"},[t._v("\n                                                "+t._s(t._f("moment")(e.created_at,"from","now"))+"\n                                            ")])],2)]):r("div",{staticClass:"sent-message message-container "},[r("div",{staticClass:"message"},[e.attachment?[e.attachment.content&&"image"==e.attachment.type?r("img",{attrs:{src:e.attachment.content,alt:"sent photo."}}):e.attachment.content&&"video"==e.attachment.type?r("video",{attrs:{width:"320",height:"240",controls:""}},[r("source",{attrs:{src:e.attachment.content}})]):t._e()]:t._e(),t._v(" "),e.content?r("p",{staticClass:"m-0"},[t._v(t._s(e.content))]):t._e(),t._v(" "),r("div",{staticClass:"time"},[t._v("\n                                                "+t._s(t._f("moment")(e.created_at,"from","now"))+"\n                                            ")])],2)])])}))],2),t._v(" "),r("div",{staticClass:"input-box"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.sendMessage(e)}}},[r("b-input-group",{scopedSlots:t._u([{key:"prepend",fn:function(){return[r("b-input-group-text",[r("input",{attrs:{type:"file",hidden:"",id:"sendImg"},on:{change:function(e){return t.onFileSelected(e)}}}),t._v(" "),r("label",{staticClass:"m-0",attrs:{for:"sendImg"}},[r("b-img",{attrs:{src:"/images/icons/svg/social-image-gery.svg",alt:"icon"}})],1),t._v(" "),t.attach?r("div",{staticClass:"attach"},["image"==t.attachType?[r("img",{staticClass:"image",attrs:{src:t.attachUrl,alt:""}}),t._v(" "),r("img",{staticClass:"icon",staticStyle:{cursor:"pointer"},attrs:{src:"/images/icons/svg/reservation-remove.svg",alt:""}})]:"video"==t.attachType?[r("video",{staticClass:"video"},[r("source",{attrs:{src:t.attachUrl}})])]:t._e()],2):t._e()])]},proxy:!0}])},[t._v(" "),r("b-form-input",{attrs:{placeholder:"Type your message…"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),r("b-input-group-append",[r("b-button",{attrs:{type:"submit",variant:"default"}},[t._v("Send")])],1)],1)],1)])]),t._v(" "),t.mediaisOpen&&!t.informationIsOpen?r("b-col",{staticClass:"chat-media",attrs:{sm:"4"}},[r("div",[r("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("chat.cat_media")))]),t._v(" "),r("b-row",t._l(t.gallery,(function(img){return r("b-col",{key:img,staticClass:"p-0 text-center",attrs:{cols:"6"}},[r("b-img",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],attrs:{src:img,alt:"img"},on:{click:function(e){t.popupImageSrc=img}}})],1)})),1)],1),t._v(" "),r("b-modal",{attrs:{"no-fade":"",id:"modal-1",size:"lg",centered:"","hide-header-close":"","hide-footer":"","hide-header":""}},[r("b-img",{staticClass:"w-100",attrs:{src:t.popupImageSrc,alt:"img"}})],1)],1):t._e(),t._v(" "),t.informationIsOpen&&!t.mediaisOpen?r("b-col",{staticClass:"group-information",attrs:{sm:"4"}},[r("div",[r("label",{staticClass:"title",attrs:{for:"changeGropupName"}},[t._v(t._s(t.$t("chat.group_name")))]),t._v(" "),r("b-form-input",{staticClass:"text-input",attrs:{placeholder:"Group Name",id:"changeGropupName",type:"text"},model:{value:t.groupChatName,callback:function(e){t.groupChatName=e},expression:"groupChatName"}}),t._v(" "),r("b-button",{staticClass:"change-group-name w-100 text-center",attrs:{variant:"default"},on:{click:function(e){return t.changeGroupTitle()}}},[t.loading.changeGroupName?t._e():r("span",[t._v(t._s(t.$t("chat.change_btn")))]),t._v(" "),t.loading.changeGroupName?r("b-spinner",{attrs:{type:"grow",small:""}}):t._e()],1)],1),t._v(" "),r("div",[r("label",{staticClass:"title",attrs:{for:"changeGropupName"}},[t._v(t._s(t.$t("chat.group_name")))]),t._v(" "),r("b-button",{staticClass:"add-member w-100 text-center",attrs:{variant:"default"},on:{click:function(e){return t.openAddMembers()}}},[t._v("+ "+t._s(t.$t("chat.add_member")))]),t._v(" "),r("div",{staticClass:"user d-flex",attrs:{"align-v":"center"}},[t.currentUserInfo.length>0?r("div",{staticClass:"profile-image"},[r("b-img",{attrs:{src:t.currentUserInfo[0].details.image_url,alt:"profile image"}})],1):t._e(),t._v(" "),r("div",{staticClass:"name"},[t._v("You")])]),t._v(" "),t._l(t.membersInArray,(function(e,n){return[e.id!=t.currentUser.userId?r("div",{key:n+"img",staticClass:"user d-flex",attrs:{"align-v":"center"}},[r("div",{staticClass:"profile-image"},[r("b-img",{attrs:{src:e.details.image_url,alt:"profile image"}})],1),t._v(" "),r("div",{staticClass:"name"},[t._v(t._s(e.username))]),t._v(" "),r("b-button",{staticClass:"no-shadow p-0 remove",attrs:{variant:"default"},on:{click:function(r){return t.$bvModal.show("modal-"+e.id)}}},[r("b-img",{attrs:{src:"/images/icons/svg/social-remove-item.svg",alt:"remove"}})],1),t._v(" "),r("b-modal",{attrs:{id:"modal-"+e.id,centered:"","dialog-class":"delete-video-modal","hide-header":""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[r("div",{staticClass:"d-flex"},[t.loading.delete?r("div",{staticClass:"pt-1"},[r("b-spinner",{staticClass:"spinner-primary",attrs:{small:"",type:"grow"}})],1):t._e(),t._v(" "),r("b-button",{staticClass:"no-shadow",attrs:{variant:"default"},on:{click:function(r){return t.$bvModal.hide("modal-"+e.id)}}},[t._v("No")]),t._v(" "),r("b-button",{staticClass:"no-shadow color-white bg-secondary-1",attrs:{disabled:t.loading.delete,variant:"default"},on:{click:function(r){return t.removeUserFromGroup(e.id)}}},[t.loading.removeMemberFromGroup?t._e():r("span",[t._v("Yes")]),t._v(" "),t.loading.removeMemberFromGroup?r("b-spinner",{attrs:{type:"grow",small:""}}):t._e()],1)],1)]},proxy:!0}],null,!0)},[r("p",{staticClass:"m-0"},[t._v("Are you sure you want to remove "),r("span",{staticClass:"color-primary"},[t._v(t._s(e.username))]),t._v(" from "),r("span",{staticClass:"color-primary"},[t._v(t._s(t.chatName))]),t._v(" ?")])])],1):t._e()]}))],2)]):t._e()],1)],1)])],1)],1),t._v(" "),r("b-modal",{attrs:{"content-class":"create-group-popup",id:"addmemberpopup",size:"lg",centered:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[r("div",{staticClass:"title"},[t._v("Add Members to "+t._s(t.chatName))])]},proxy:!0},{key:"modal-header-close",fn:function(){return[r("b-img",{staticClass:"close-icon",attrs:{src:"/images/icons/svg/social-close-btn.svg",alt:"icon"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[r("b-button",{staticClass:"b-block text-center p-2 w-100 create-room-btn no-shadow mb-0 mr-0 ml-0",attrs:{disabled:t.selectedFriends.length<1,variant:"default"},on:{click:function(e){return t.addMemberToGroup()}}},[t.loading.addMemberToGroup?t._e():r("span",[t._v("Add Member to chat")]),t._v(" "),t.loading.addMemberToGroup?r("b-spinner",{attrs:{type:"grow",small:""}}):t._e()],1)]},proxy:!0}])},[t._v(" "),t._v(" "),r("div",{staticClass:"form-container"},[r("b-form",[r("div",{staticClass:"mt-2"},[r("b-button",{attrs:{variant:"default"}},[r("label",{attrs:{for:"Members"}},[t._v("Add Members")])]),t._v(" "),r("div",{staticClass:"members-container"},[t._l(t.selectedFriends,(function(e,n){return r("div",{key:e.id,staticClass:"single-selected-friend d-inline-block"},[r("span",[e.user_details.image_url?r("b-img",{staticClass:"friend-profile",attrs:{src:e.user_details.image_url,alt:"profile img"}}):r("b-img",{staticClass:"friend-profile",attrs:{src:"/images/placeholder.jpg",alt:"profile img"}})],1),t._v(" "),r("span",[t._v(t._s(e.first_name)+" "+t._s(e.last_name))]),t._v(" "),r("span",{staticClass:"close-btn",on:{click:function(e){return t.removeFromSelected(n)}}},[r("b-img",{attrs:{src:"/images/icons/svg/social-remove-selected-friend.svg",alt:"icon"}})],1)])})),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.friendSearchInput,expression:"friendSearchInput"}],ref:"friendSearchInput",staticClass:"w-auto select-friend-input",attrs:{type:"text",placeholder:"Type.."},domProps:{value:t.friendSearchInput},on:{input:function(e){e.target.composing||(t.friendSearchInput=e.target.value)}}})],2)],1),t._v(" "),r("div",{staticClass:"friends"},[r("label",[t._v("Friends")]),t._v(" "),t._l(t.filltredUsers,(function(e,n){return[t.selectedFriends.includes(e)||t.isMember(e.id)?t._e():r("div",{key:n,staticClass:"single-friend",on:{click:function(r){return t.pushToSelectedFriend(e)}}},[r("div",{staticClass:"d-flex",attrs:{"vertical-align":"center"}},[r("div",{staticClass:"profile-image"},[e.user_details.image_url?r("b-img",{attrs:{src:e.user_details.image_url,alt:"profile img"}}):r("b-img",{attrs:{src:"/images/placeholder.jpg",alt:"profile img"}})],1),t._v(" "),r("div",{staticClass:"name"},[r("span",[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])])])])]})),t._v(" "),t.filltredUsers.length<1?r("p",{staticClass:"text-center text-secondary",attrs:{size:"lg"}},[t._v("No Friend Found")]):t._e()],2)])],1)]),t._v(" "),r("b-modal",{attrs:{"content-class":"create-group-popup",id:"creatGroup",size:"lg",centered:""},scopedSlots:t._u([{key:"modal-title",fn:function(){return[r("div",{staticClass:"title"},[t._v(t._s(t.$t("chat.create_group_chat")))])]},proxy:!0},{key:"modal-header-close",fn:function(){return[r("b-img",{staticClass:"close-icon",attrs:{src:"/images/icons/svg/social-close-btn.svg",alt:"icon"}})]},proxy:!0},{key:"modal-footer",fn:function(){return[r("b-button",{staticClass:"b-block text-center p-2 w-100 create-room-btn no-shadow mb-0 mr-0 ml-0",attrs:{disabled:t.selectedFriends.length<2,variant:"default"},on:{click:t.createGroup}},[t._v("\n                Create Group Chat\n            ")])]},proxy:!0}])},[t._v(" "),t._v(" "),r("div",{staticClass:"form-container"},[r("b-form",[r("div",[r("label",{attrs:{for:"groupName"}},[t._v(t._s(t.$t("chat.group_name")))]),t._v(" "),r("b-form-input",{staticClass:"text-input",attrs:{type:"text",placeholder:t.$t("chat.group_name")},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),t._v(" "),r("div",{staticClass:"mt-2"},[r("label",{attrs:{for:"Members"}},[t._v("Add Members")]),t._v(" "),r("div",{staticClass:"members-container"},[t._l(t.selectedFriends,(function(e,n){return r("div",{key:e.id,staticClass:"single-selected-friend d-inline-block"},[r("b-img",{staticClass:"friend-profile",attrs:{src:"/images/placeholder.jpg",alt:"friend photo"}}),t._v(" "),r("span",[t._v(t._s(e.first_name)+" "+t._s(e.last_name))]),t._v(" "),r("span",{staticClass:"close-btn",on:{click:function(e){return t.removeFromSelected(n)}}},[r("b-img",{attrs:{src:"/images/icons/svg/social-remove-selected-friend.svg",alt:"icon"}})],1)],1)})),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.friendSearchInput,expression:"friendSearchInput"}],ref:"friendSearchInput",staticClass:"w-auto select-friend-input",attrs:{type:"text",placeholder:"Type.."},domProps:{value:t.friendSearchInput},on:{input:function(e){e.target.composing||(t.friendSearchInput=e.target.value)}}})],2)]),t._v(" "),r("div",{staticClass:"friends"},[r("label",[t._v("Friends")]),t._v(" "),t._l(t.filltredUsers,(function(e,n){return[t.selectedFriends.includes(e)?t._e():r("div",{key:n,staticClass:"single-friend",on:{click:function(r){return t.pushToSelectedFriend(e)}}},[r("div",{staticClass:"d-flex",attrs:{"vertical-align":"center"}},[r("div",{staticClass:"profile-image"},[r("b-img",{attrs:{src:"/images/placeholder.jpg",alt:"profile img"}})],1),t._v(" "),r("div",{staticClass:"name"},[r("span",[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])])])])]})),t._v(" "),t.filltredUsers.length<1?r("p",{staticClass:"text-center text-secondary",attrs:{size:"lg"}},[t._v("No Friend Found")]):t._e()],2)])],1)])],1)}),[],!1,null,"3de9a667",null);e.default=component.exports}}]);