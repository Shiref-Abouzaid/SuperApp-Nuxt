(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{625:function(t,e,o){"use strict";o.r(e);o(3),o(40);var n=o(16),c=o.n(n),l={name:"SingleVideo",data:function(){return{videoData:"",commentData:{},relatedVideos:[],currentUserId:2,loading:{comment:!1,delete:!1}}},computed:{locale:function(){return this.$store.getters["locale/locale"]}},methods:{getVideoData:function(){var t=this;c.a.get("/my/videos/".concat(this.$nuxt.$route.params.videoId)).then((function(e){t.videoData=e.data,t.videoData.comments.reverse(),console.log("video >> ",e.data)}))},scrollToBottomOfChat:function(){var t=this;setTimeout((function(){var e=t.$el.querySelector(".comments-box");e.scrollTop=e.scrollHeight}),10)},addComment:function(){var t=this;if(this.$store.getters["auth/isAuthenticated"]){var e=this.commentData;e.video_id=this.videoData.id,e.user_id=this.$store.getters["auth/userId"],e.parent_id=0,this.loading.comment=!0,c.a.post("/my/videos/comments",e).then((function(e){console.log(e),t.videoData.comments.push({user_image:e.data.data.image_url,comment:t.commentData.comment,user_name:e.data.data.username}),t.loading.comment=!1,t.commentData.comment="",t.scrollToBottomOfChat()}))}},getrelatedVideos:function(){var t=this,e=Math.floor(20*Math.random())+1;c.a.get("/my/videos/skip/".concat(e,"/take/4")).then((function(e){t.relatedVideos=e.data.data,console.log("related video",e.data.data)})).catch((function(t){console.log(t.response)}))},deleteComment:function(t){var e=this;this.loading.delete=!0,c.a.delete("/my/videos/comment/".concat(t)).then((function(o){e.loading.delete=!1,e.$bvModal.hide("modal-".concat(t)),e.videoData.comments=e.videoData.comments.filter((function(e){return e.id!=t})),e.$bvToast.toast("comment has ben deleted successfuly",{title:"Video deleted",autoHideDelay:5e3,variant:"default"})})).catch((function(t){console.log(t),e.loading.delete=!1}))}},created:function(){this.getVideoData(),this.getrelatedVideos()}},r=o(39),component=Object(r.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"single-video-page"},[o("b-container",[o("nav",{attrs:{"aria-label":"breadcrumb"}},[o("ol",{staticClass:"breadcrumb"},[o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/"+t.locale+"/videos"}},[t._v("Funny Video")])],1),t._v(" "),o("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(t._s(t.$route.params.videoName))])])]),t._v(" "),o("div",{staticClass:"single-video-page-container"},[o("b-row",[o("b-col",{attrs:{sm:"8"}},[o("div",{staticClass:"video-side"},[o("h1",{staticClass:"title"},[t._v("\n                                "+t._s(t.videoData.title)+"\n                            ")]),t._v(" "),o("div",{staticClass:"box"},[o("b-embed",{staticClass:"the-frame",attrs:{autoplay:"",type:"iframe",aspect:"4by3",allow:"fullscreen",controls:"",src:t.videoData.path}})],1)])]),t._v(" "),t.videoData?o("b-col",{attrs:{sm:"4"}},[o("div",{staticClass:"info-side"},[o("div",{staticClass:"d-flex channle-info"},[o("div",[o("b-img",{attrs:{src:t.videoData.user.user_image?t.videoData.user.user_image:"/images/placeholder.jpg",alt:"channle-img"}})],1),t._v(" "),o("div",[o("nuxt-link",{attrs:{to:"/"+t.locale+"/user-profile/"+t.videoData.user.id+"/"+t.videoData.user.username}},[o("h2",{staticClass:"channle-name"},[t._v(t._s(t.videoData.user.first_name)+" "+t._s(t.videoData.user.last_name))])]),t._v(" "),o("p",{staticClass:"date"},[t._v(t._s(t.$moment(t.videoData.created_at).fromNow()))])],1)]),t._v(" "),o("p",{staticClass:"description"},[t._v(t._s(t.videoData.description))]),t._v(" "),o("b-row",{staticClass:"mt-2 mb-2 views-and-comments-count"},[o("b-col",[o("b-img",{attrs:{src:"/images/icons/svg/videos-view.svg",alt:"views"}}),t._v(" "),o("span",[t._v(t._s(t.videoData.views)+" Views")])],1),t._v(" "),o("b-col",[o("b-img",{attrs:{src:"/images/icons/svg/viedos-comment.svg",alt:"views"}}),t._v(" "),o("span",[t._v(t._s(t.videoData.comments.length)+" Comments")])],1)],1),t._v(" "),o("h3",{staticClass:"title-comments"},[t._v("Comments")]),t._v(" "),o("div",{staticClass:"comments-box"},t._l(t.videoData.comments,(function(e){return o("div",{key:e.id,staticClass:"single-comment d-flex"},[o("div",{staticClass:"comment-user-img"},[o("b-img",{attrs:{src:e.user_image?e.user_image:"/images/placeholder.jpg",title:e.user_name,alt:"user-img"}})],1),t._v(" "),o("div",[o("nuxt-link",{attrs:{to:"/"+t.locale+"/user-profile/"+e.user_id+"/"+e.user_name}},[o("span",{staticClass:"comment-name"},[t._v(t._s(e.user_name))])]),t._v(" "),o("span",{staticClass:"comment-date"},[t._v(t._s(t.$moment(e.created_at).fromNow()))]),t._v(" "),o("p",{staticClass:"commen-content"},[t._v("\n                                            "+t._s(e.comment)+"\n                                        ")])],1),t._v(" "),e.user_id==t.$store.getters["auth/userId"]?[o("div",{staticClass:"my-edit-edit"},[o("b-button",{staticClass:"no-shadow p-0",attrs:{variant:"defailt",id:"edit-options-"+e.id}},[o("b-img",{attrs:{src:"/images/icons/svg/social-dots.svg"}})],1)],1),t._v(" "),o("b-popover",{attrs:{"custom-class":"my-video-edit",placement:"bottomleft",target:"edit-options-"+e.id,triggers:"click blur"}},[o("div",{staticClass:"box"},[o("b-button",{staticClass:"d-flex p-0 no-shadow",attrs:{variant:"default"},on:{click:function(o){return t.$bvModal.show("modal-"+e.id)}}},[o("b-img",{attrs:{src:"/images/icons/svg/videos-remove.svg",alt:"icon"}}),t._v(" "),o("span",[t._v("Remove Comment")])],1)],1)]),t._v(" "),o("b-modal",{attrs:{id:"modal-"+e.id,centered:"","dialog-class":"delete-video-modal","hide-header":""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[o("div",{staticClass:"d-flex"},[t.loading.delete?o("div",{staticClass:"pt-1"},[o("b-spinner",{staticClass:"spinner-primary",attrs:{small:"",type:"grow"}})],1):t._e(),t._v(" "),o("b-button",{staticClass:"no-shadow",attrs:{variant:"default"},on:{click:function(o){return t.$bvModal.hide("modal-"+e.id)}}},[t._v("No")]),t._v(" "),o("b-button",{staticClass:"no-shadow color-white bg-secondary-1",attrs:{variant:"default"},on:{click:function(o){return t.deleteComment(e.id)}}},[t._v("Yes")])],1)]},proxy:!0}],null,!0)},[o("p",{staticClass:"m-0"},[t._v("Are you sure you want to delete this comment?")])])]:t._e()],2)})),0),t._v(" "),o("div",{staticClass:"input-comment-box"},[o("b-input-group",{staticClass:"mt-3",scopedSlots:t._u([{key:"prepend",fn:function(){return[o("div",{staticClass:"current-user-img"},[o("b-img",{staticClass:"user",attrs:{src:"/images/placeholder.jpg",alt:"current-user"}}),t._v(" "),t.loading.comment?t._e():o("b-img",{staticClass:"icon",attrs:{src:"/images/icons/svg/viedos-comment.svg",alt:"current-user"}}),t._v(" "),t.loading.comment?o("b-spinner",{staticClass:"spinner-primary icon",attrs:{variant:"dfault",type:"grow",small:""}}):t._e()],1)]},proxy:!0},{key:"append",fn:function(){return[o("div",{staticClass:"input-icon"},[o("b-button",{attrs:{variant:"default bg-secondary-1 send-btn"},on:{click:function(e){return t.addComment()}}},[o("b-img",{attrs:{src:"/images/icons/svg/videos-comment-btn.svg",alt:"icon"}})],1)],1)]},proxy:!0}],null,!1,907675159)},[t._v(" "),t._v(" "),o("b-form-input",{staticClass:"input-comment no-shadow",attrs:{type:"text",placeholder:"Add Comment.."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addComment()}},model:{value:t.commentData.comment,callback:function(e){t.$set(t.commentData,"comment",e)},expression:"commentData.comment"}})],1)],1)],1)]):t._e()],1),t._v(" "),o("div",{staticClass:"related-videos"},[o("h2",{staticClass:"title-related"},[t._v("Related Videos")]),t._v(" "),o("b-row",t._l(t.relatedVideos,(function(video){return o("b-col",{key:video.id,attrs:{sm:"3"}},[o("div",{staticClass:"single-video-card"},[o("nuxt-link",{attrs:{to:"/"+t.locale+"/videos/watch/"+video.id+"/"+t.$route.params.videoName}},[o("div",{staticClass:"video"},[o("b-embed",{attrs:{type:"video",aspect:"4by3"}},[o("source",{attrs:{src:video.path,type:"video/mp4"}})]),t._v(" "),o("div",{staticClass:"duration"},[t._v("\n                                            00:"+t._s(Math.round(video.duration))+"\n                                        ")])],1),t._v(" "),o("div",{staticClass:"info"},[o("h2",{staticClass:"title"},[t._v("\n                                            "+t._s(video.title)+"\n                                        ")]),t._v(" "),o("div",{staticClass:"channel d-flex"},[o("b-img",{attrs:{src:"/images/placeholder.jpg",alt:"icon"}}),t._v(" "),o("h3",{staticClass:"channel-name"},[t._v(t._s(video.user.username))])],1),t._v(" "),o("div",{staticClass:"views"},[o("b-row",[o("b-col",{attrs:{cols:"6"}},[o("div",{staticClass:"d-flex box"},[o("img",{attrs:{src:"/images/icons/svg/videos-view.svg",alt:"icon"}}),t._v(" "),o("span",[t._v(t._s(video.views)+" views")])])]),t._v(" "),o("b-col",{attrs:{cols:"6"}},[o("div",{staticClass:"d-flex box"},[o("img",{attrs:{src:"/images/icons/svg/videos-time.svg",alt:"icon"}}),t._v(" "),o("span",[t._v("\n                                                            "+t._s(t.$moment(video.created_at).fromNow())+"\n                                                        ")])])])],1)],1)])])],1)])})),1)],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);