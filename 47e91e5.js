(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{533:function(t,e,o){"use strict";o.r(e);o(6),o(59),o(22),o(54),o(60),o(40),o(494);var d=o(16),l=o.n(d),r={name:"addVideo",data:function(){return{videoSelected:!1,videoUploaded:!1,loading:{main:!1,count:0},video:"",videoSrc:"",videoData:{title:"",description:""},validate:{videoSize:!0,title:!1,description:!1}}},watch:{"videoData.title":function(){""==this.videoData.title?this.validate.title=!0:this.validate.title=!1},"videoData.description":function(){""==this.videoData.description?this.validate.description=!0:this.validate.description=!1}},methods:{getVideoData:function(t){var video=t.srcElement.files[0];this.video=video,this.videoSrc=URL.createObjectURL(video),video.size/1e3<1e5&&(this.validate.videoSize=!1)},addVideo:function(){var t=this;if(!this.validate.title&&!this.validate.description){this.loading.main=!0;var e=new FormData;e.append("video",this.video),e.append("title",this.videoData.title),e.append("description",this.videoData.description),e.append("user_id",this.$store.getters["auth/userId"]);var o={onUploadProgress:function(e){return t.loading.count=Math.round(100*e.loaded/e.total)}};l.a.post("/my/videos",e,o,{headers:{"content-Type":"multipart/form-data"}}).then((function(e){console.log(e),t.loading.main=!1,t.videoData.title="",t.videoData.description="",setTimeout((function(){t.validate.title=!1,t.validate.description=!1}),100),t.$bvToast.toast("Video has ben published successfuly",{title:"Video published",autoHideDelay:5e3,variant:"default"}),t.video="",t.validate.videoSize=!0,t.loading.count=0})).catch((function(e){console.log(e.response),t.loading.main=!1,t.$bvToast.toast("".concat(e.response.data.message),{title:"Error",autoHideDelay:5e3,variant:"danger"})}))}}}},n=o(39),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"add-video"},[o("b-container",[o("nav",{attrs:{"aria-label":"breadcrumb"}},[o("ol",{staticClass:"breadcrumb"},[o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/videos/popularvideos"}},[t._v("Funny Videos")])],1),t._v(" "),o("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Add New Video")])])]),t._v(" "),o("div",{staticClass:"add-video-container"},[o("h1",{staticClass:"title"},[t._v("Add New Video")]),t._v(" "),t.validate.videoSize?o("div",{staticClass:"d-flex h-100 mt-3"},[o("div",{staticClass:"text-center upload-video-panner"},[o("label",{staticClass:"img-as-label",attrs:{for:"uploadvideo"}},[o("b-img",{attrs:{src:"/images/icons/svg/add-video-hero.svg",alt:"img"}})],1),t._v(" "),o("h2",{staticClass:"title-upload"},[t._v("Upload Video")]),t._v(" "),o("p",{staticClass:"mb-1 color-grey-light-5"},[t._v("\n                        Max size is 100MB\n                    ")]),t._v(" "),o("p",{staticClass:"mb-2 color-grey-light-5"},[t._v("\n                        Max duration is 30 second\n                    ")]),t._v(" "),o("div",{staticClass:"input container"},[o("label",{staticClass:"label bg-primary-opacity-1 color-primary-1  w-100",attrs:{for:"uploadvideo"}},[o("b-img",{attrs:{src:"/images/icons/svg/social-photo-cloud.svg",alt:"img"}}),t._v(" "),o("span",[t._v("Choose Video")])],1),t._v(" "),o("input",{attrs:{type:"file",accept:".mp4",hidden:"",id:"uploadvideo"},on:{change:function(e){return t.getVideoData(e)}}}),t._v(" "),o("label",{staticClass:"label bg-primary-opacity-1 color-primary-1  w-100",attrs:{for:"posterupload"}},[o("b-img",{attrs:{src:"/images/icons/svg/social-photo-cloud.svg",alt:"img"}}),t._v(" "),o("span",[t._v("Choose Poster")])],1),t._v(" "),o("input",{attrs:{type:"file",accept:".mp4",hidden:"",id:"posterupload"},on:{change:function(e){t.videoSelected=!0}}}),t._v(" "),t.validate.videoSize&&t.video?o("p",{staticClass:"text-center text-danger pt-2"},[t._v("\n                            Video Should be less than 100MB\n                        ")]):t._e()])])]):t._e(),t._v(" "),o("div",{staticClass:"add-video-data"},[o("b-form",{on:{submit:function(e){return e.preventDefault(),t.addVideo()}}},[o("b-row",[o("b-col",{staticClass:"pl-0 pr-0 pl-sm-4 pr-sm-4",attrs:{sm:"6"}},[t.video&&!t.validate.videoSize?o("div",{staticClass:"preview"},[o("label",{staticClass:"label"},[t._v("Preview")]),t._v(" "),t.loading.main?o("div",{staticClass:"box selected-video-container"},[o("b-embed",{attrs:{type:"video",aspect:"4by3",controls:""}},[o("source",{attrs:{src:t.videoSrc,type:"video/mp4"}})]),t._v(" "),o("div",{staticClass:"overlay"},[o("div",{staticClass:"overlay-progress-bar"},[o("b-progress",{staticClass:"mb-3",attrs:{variant:"default",value:t.loading.count,max:100}}),t._v(" "),o("p",{staticClass:"progress-count-upload"},[t._v("Uploading "+t._s(t.loading.count)+"%")])],1)])],1):t._e(),t._v(" "),t.loading.main?t._e():o("div",{staticClass:"selected-video-container"},[o("b-embed",{attrs:{type:"video",aspect:"4by3",controls:""}},[o("source",{attrs:{src:t.videoSrc,type:"video/mp4"}})])],1),t._v(" "),o("p",{staticClass:"file-name"},[t._v("File "+t._s(t.video.name))])]):t._e()]),t._v(" "),t.video&&!t.validate.videoSize?o("b-col",{staticClass:"pl-0 pr-0 pl-sm-4 pr-sm-4",attrs:{sm:"6"}},[o("div",{staticClass:"video-data"},[o("label",{staticClass:"label",attrs:{for:"title"}},[t._v("Title")]),t._v(" "),o("b-form-input",{staticClass:"text-input no-shadow",attrs:{placeholder:"Title",type:"text",id:"title"},model:{value:t.videoData.title,callback:function(e){t.$set(t.videoData,"title",e)},expression:"videoData.title"}}),t._v(" "),t.validate.title?o("p",{staticClass:"text-danger validate"},[t._v("Title is Reqiured")]):t._e(),t._v(" "),o("label",{staticClass:"label  ",attrs:{for:"description"}},[t._v("Description")]),t._v(" "),o("b-textarea",{staticClass:"text-area no-shadow",attrs:{placeholder:"Description",id:"description",rows:"3"},model:{value:t.videoData.description,callback:function(e){t.$set(t.videoData,"description",e)},expression:"videoData.description"}}),t._v(" "),t.validate.description?o("p",{staticClass:"text-danger validate"},[t._v("Description is Reqiured")]):t._e(),t._v(" "),o("b-button",{staticClass:"bg-primary-1 color-white no-shadow w-100 p-2 h2",attrs:{variant:"default",type:"submit"}},[t._v("Publish Video")]),t._v(" "),t.loading.main?o("div",{staticClass:"text-center mt-2"},[o("b-spinner",{staticClass:"spinner-primary",attrs:{type:"grow",variant:"default"}})],1):t._e()],1)]):t._e()],1)],1)],1)])])],1)}),[],!1,null,null,null);e.default=component.exports}}]);